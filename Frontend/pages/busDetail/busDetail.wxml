<!-- pages/busDetail/busDetail.wxml -->
<view class="container">
  <view class="line-info">
    <text class="line-name">{{lineInfo.bus_staname}}</text>
    <text>èµ·ç‚¹ç«™ï¼š{{lineInfo.sta_sta}}</text>
    <text>ç»ˆç‚¹ç«™ï¼š{{lineInfo.end_sta}}</text>
    <text>é¦–ç­è½¦ï¼š{{lineInfo.fir_time}}</text>
    <text>æœ«ç­è½¦ï¼š{{lineInfo.end_time}}</text>
    <text>ç¥¨ä»·ï¼š{{lineInfo.bus_money}}</text>
  </view>

  <map id="busMap" class="map"
       longitude="{{longitude}}"
       latitude="{{latitude}}"
       scale="13"
       markers="{{mapMarkers}}"
       polyline="{{polyline}}"
       bindmarkertap="onMarkerTap">
  </map>

  <view class="station-list">
    <text class="title">ç«™ç‚¹åˆ—è¡¨</text>
    <block wx:for="{{stations}}" wx:key="sid">
      <view class="station-item">
        <text>{{index + 1}}. {{item.bus_staname}}</text>
        <view class="bus-info">
          <!-- æ˜¾ç¤ºè½¦è¾†å½“å‰ä½ç½® -->
          <block wx:if="{{item.buses && item.buses.length > 0}}">
            <block wx:for="{{item.buses}}" wx:key="busId">
              <text class="bus-status">ğŸš è·ç¦»ä¸‹ä¸€ç«™ {{item.buses[0].distance}} ç±³</text>
            </block>
          </block>
          <!-- æ˜¾ç¤ºè½¦è¾†å·²é€šè¿‡ -->
          <block wx:elif="{{item.busPassed}}">
            <text class="bus-passed">å·²é€šè¿‡</text>
          </block>
        </view>
      </view>
    </block>
  </view>
</view>
