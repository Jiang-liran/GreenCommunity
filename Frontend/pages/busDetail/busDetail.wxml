<!-- pages/busDetail/busDetail.wxml -->
<view class="container">
  <view class="line-info">
    <text class="line-name">{{lineInfo.bus_staname}}</text>
    <text>èµ·ç‚¹ç«™ï¼š{{lineInfo.sta_sta}}</text>
    <text>ç»ˆç‚¹ç«™ï¼š{{lineInfo.end_sta}}</text>
    <text>é¦–ç­è½¦ï¼š{{lineInfo.fir_time}}</text>
    <text>æœ«ç­è½¦ï¼š{{lineInfo.end_time}}</text>
    <text>ç¥¨ä»·ï¼š{{lineInfo.bus_money}}</text>
  </view>

  <map id="busMap" class="map"
       longitude="{{longitude}}"
       latitude="{{latitude}}"
       scale="13"
       markers="{{mapMarkers}}"
       polyline="{{polyline}}"
       bindmarkertap="onMarkerTap">
  </map>

  <view class="station-list">
    <text class="title">ç«™ç‚¹åˆ—è¡¨</text>
    <block wx:for="{{stations}}" wx:key="sid">
      <view class="station-item">
        <view class="station-info">
          <text>{{index + 1}}. {{item.name}}</text>
        </view>
        <view class="bus-info">
          <!-- æ˜¾ç¤ºæ¥è¿‘è¯¥ç«™ç‚¹çš„è½¦è¾† -->
          <block wx:if="{{item.approachingBuses && item.approachingBuses.length > 0}}">
            <block wx:for="{{item.approachingBuses}}" wx:key="busId">
              <text class="bus-status">ğŸš è·ç¦»ä¸‹ä¸€ç«™ {{item.distance}} ç±³ (Bus ID: {{item.busId}})</text>
            </block>
          </block>
          <!-- æ˜¾ç¤ºå·²åˆ°è¾¾è¯¥ç«™ç‚¹çš„è½¦è¾† -->
          <block wx:elif="{{item.arrivedBuses && item.arrivedBuses.length > 0}}">
            <block wx:for="{{item.arrivedBuses}}" wx:key="busId">
              <text class="bus-passed">ğŸš å·²åˆ°è¾¾ (Bus ID: {{item.busId}})</text>
            </block>
          </block>
          <!-- æ— è½¦è¾†ä¿¡æ¯ -->
          <block wx:else>
            <text class="no-bus">æš‚æ— è½¦è¾†ä¿¡æ¯</text>
          </block>
        </view>
      </view>
    </block>
  </view>
</view>
